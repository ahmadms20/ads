<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>InMobi CMP and Ads Integration</title>

  <!-- InMobi Choice.Consent Manager Tag v3.0(for TCF 2.2) -->
  <script type="text/javascript" async>
    (function () {
      var host = 'ads-example.vercel.app';
      var element = document.createElement('script');
      var firstScript = document.getElementsByTagName('script')[0];
      var url = 'https://cmp.inmobi.com/choice/Q12MZ6FNVsvVA/' + host + '/choice.js?tag_version=V3';
      element.async = true;
      element.type = 'text/javascript';
      element.src = url;
      firstScript.parentNode.insertBefore(element, firstScript);
    })();
  </script>

  <script>
    var jsonp = document.createElement('script');
    jsonp.setAttribute('src', 'https://geolocation.onetrust.com/cookieconsentpub/v1/geo/location/geofeed');
    document.head.appendChild(jsonp);

    window.geofeed = function (options) {
      var continent = options.continent.toString();
      var insertAdsJs = function () {
        var script1 = document.createElement('script');
        script1.async = true;
        script1.type = 'text/javascript';
        script1.src = "//fms.360yield.com/ow/bundles/live/pubgalaxy/publishers/123rfcom.min.js";
        document.head.appendChild(script1);

        var script2 = document.createElement('script');
        script2.async = true;
        script2.type = 'text/javascript';
        script2.src = "//btloader.com/tag?o=5184339635601408&upapi=true";
        document.head.appendChild(script2);
      };

      if (continent === 'EU') {
        var cnt = 0;
        var consentSetInterval = setInterval(function () {
          cnt++;
          if (cnt === 600) clearInterval(consentSetInterval);
          if (typeof window.__tcfapi === 'function') {
            clearInterval(consentSetInterval);
            window.__tcfapi('addEventListener', 2, function (tcData, listenerSuccess) {
              if (listenerSuccess && (tcData.eventStatus === 'tcloaded' || tcData.eventStatus === 'useractioncomplete')) {
                var consentToStore = tcData?.purpose?.consents?.[1] || false;
                var consentToGoogleAds = tcData?.vendor?.consents?.[755] || false;
                if (!tcData.gdprApplies || (consentToStore && consentToGoogleAds)) {
                  insertAdsJs();
                }
              }
            });
          }
        }, 100);
      } else {
        insertAdsJs();
      }
    };
  </script>
</head>
<body>
  <!-- Ads Slots -->
  <div id='123rfcom48535' style="width:300px; height:250px; background:#f0f0f0; margin-bottom:20px;"></div>
  <div id='123rfcom48536' style="width:300px; height:250px; background:#f0f0f0;"></div>
</body>
</html>